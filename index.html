<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <meta name="theme-color" content="#0E2A22"/>
  <title>Budget Buddy (v1.3.4)</title>
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<div id="splash" class="run" aria-hidden="true">
  <div class="splash-circle"></div>
  <div class="splash-logo">
    <svg viewBox="0 0 128 128" width="72" height="72" aria-hidden="true">
      <circle cx="64" cy="64" r="56" fill="#1F4D3B"/>
      <rect x="28" y="44" width="72" height="50" rx="12" ry="12" fill="#ffffff"/>
      <rect x="40" y="36" width="52" height="16" rx="8" ry="8" fill="#ffffff"/>
      <path d="M44 72 a20 20 0 0 0 40 0" fill="none" stroke="#1F4D3B" stroke-width="8" stroke-linecap="round"/>
    </svg>
    <div class="logotype"><span>Budget</span><span>Buddy</span></div>
  </div>
</div>

<header>
  <button class="icon-btn" aria-hidden="true" tabindex="-1" style="opacity:0"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M10.325 4.317a1.53 1.53 0 0 1 3.35 0l.149 1.19a7.97 7.97 0 0 1 1.694.702l1.064-.707a1.53 1.53 0 1 1 1.66 2.567l-.915.61c.246.53.43 1.09.547 1.67l1.101.18a1.53 1.53 0 0 1 0 3.04l-1.1.18a7.93 7.93 0 0 1-.548 1.671l.915.611a1.53 1.53 0 1 1-1.66 2.567l-1.064-.706a7.97 7.97 0 0 1-1.694.702l-.15 1.19a1.53 1.53 0 0 1-3.348 0l-.15-1.19a7.97 7.97 0 0 1-1.694-.702l-1.063.706a1.53 1.53 0 1 1-1.66-2.567l.915-.611a7.94 7.94 0 0 1-.548-1.67l-1.1-.18a1.53 1.53 0 0 1 0-3.04l1.1-.18c.117-.581.301-1.14.547-1.671l-.915-.61a1.53 1.53 0 1 1 1.66-2.567l1.063.707c.539-.28 1.107-.517 1.694-.702l.15-1.19Z"/><circle cx="12" cy="12" r="3.25"/></svg></button>
  <div class="brand">
    <div class="mark"><svg viewBox="0 0 128 128" width="28" height="28" aria-hidden="true">
      <circle cx="64" cy="64" r="56" fill="#1F4D3B"/>
      <rect x="28" y="44" width="72" height="50" rx="12" ry="12" fill="#ffffff"/>
      <rect x="40" y="36" width="52" height="16" rx="8" ry="8" fill="#ffffff"/>
      <path d="M44 72 a20 20 0 0 0 40 0" fill="none" stroke="#1F4D3B" stroke-width="8" stroke-linecap="round"/>
    </svg></div>
    <h1><span>Budget</span><span>Buddy</span></h1>
  </div>
  <button id="settingsBtn" class="icon-btn" aria-label="Settings" title="Settings"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M10.325 4.317a1.53 1.53 0 0 1 3.35 0l.149 1.19a7.97 7.97 0 0 1 1.694.702l1.064-.707a1.53 1.53 0 1 1 1.66 2.567l-.915.61c.246.53.43 1.09.547 1.67l1.101.18a1.53 1.53 0 0 1 0 3.04l-1.1.18a7.93 7.93 0 0 1-.548 1.671l.915.611a1.53 1.53 0 1 1-1.66 2.567l-1.064-.706a7.97 7.97 0 0 1-1.694.702l-.15 1.19a1.53 1.53 0 0 1-3.348 0l-.15-1.19a7.97 7.97 0 0 1-1.694-.702l-1.063.706a1.53 1.53 0 1 1-1.66-2.567l.915-.611a7.94 7.94 0 0 1-.548-1.67l-1.1-.18a1.53 1.53 0 0 1 0-3.04l1.1-.18c.117-.581.301-1.14.547-1.671l-.915-.61a1.53 1.53 0 1 1 1.66-2.567l1.063.707c.539-.28 1.107-.517 1.694-.702l.15-1.19Z"/><circle cx="12" cy="12" r="3.25"/></svg></button>
</header>

<main>
  <section id="dashboard" class="panel active">
    <div id="paydayBanner" class="banner" hidden>
      <div><strong>It’s payday!</strong> Add your paycheck to see what you can spend.</div>
      <div class="buttons">
        <button id="bannerAdd" class="primary">Add Paycheck</button>
        <button id="bannerPlan">Plan Now</button>
      </div>
    </div>

    <div class="card compact">
      <div class="card-header">
        <h2>New Paycheck</h2>
        <div class="muted">Today or scheduled date</div>
      </div>
      <div class="inline-form wide compact">
        <label>Date <input id="pcDate" type="date"></label>
        <label>Amount <input id="pcAmount" type="number" step="0.01" min="0" placeholder="0.00"></label>
        <label>Note <input id="pcNote" placeholder="(optional)"></label>
        <button id="pcAdd" class="primary" type="button">Add</button>
      </div>
      <div id="quickPaydays" class="buttons"></div>
      <div class="segmented tiny">
        <button class="seg active" data-kind="regular" type="button">Regular</button>
        <button class="seg" data-kind="extra" type="button">Extra / Side</button>
      </div>
    </div>

    <div class="card compact">
      <div class="card-header">
        <h2>This Paycheck</h2>
        <div class="muted">Simple plan</div>
      </div>
      <div id="paycheckCard" class="paycheck-card">
        <div class="headline">You can spend: <strong id="spendable">$0.00</strong></div>
        <details>
          <summary>Details</summary>
          <div class="rows" id="pcDetails"></div>
        </details>
        <div id="shortfall" class="shortfall" hidden></div>
        <div class="buttons"><button id="applyCheck" type="button">Mark Applied</button></div>
      </div>
    </div>

    <div class="cards duo">
      <div class="card compact">
        <h3>Monthly Snapshot</h3>
        <div class="rowline"><span>Total Income</span><strong id="dashInc">$0.00</strong></div>
        <div class="rowline"><span>Total Bills</span><strong id="dashExp">$0.00</strong></div>
        <div class="rowline"><span>Debt Minimums</span><strong id="dashMin">$0.00</strong></div>
        <div class="rowline"><span>Wiggle + Spending</span><strong id="dashSW">$0.00</strong></div>
        <div class="rowline"><span>Leftover</span><strong id="dashLeft">$0.00</strong></div>
      </div>
      <div class="card compact">
        <h3>Debt‑free ETA</h3>
        <div class="gauge"><div id="gDebt" class="gbar" style="width:0%"></div></div>
        <div class="muted" id="gDebtLabel">—</div>
      </div>
    </div>
  </section>

  <section id="calendar" class="panel">
    <div class="card compact">
      <div class="cal-head">
        <button id="calPrev" class="ghost" type="button">‹</button>
        <h2 id="calTitle">September</h2>
        <button id="calNext" class="ghost" type="button">›</button>
      </div>
      <div class="weekday-row">
        <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
      </div>
      <div id="calendarGrid" class="calendar uniform"></div>
      <div id="calSummary" class="cal-summary"></div>
      <div class="buttons top-spaced">
        <button id="addBill" class="primary" type="button">New Bill</button>
        <label class="toggle"><input id="showList" type="checkbox"> Show upcoming list</label>
      </div>
      <div id="upcomingList" class="mini-table" hidden></div>
    </div>
  </section>

  <section id="debts" class="panel">
    <div class="card compact">
      <div class="card-header"><h2>Debts</h2></div>
      <form id="debtForm" class="inline-form compact">
        <input id="debtName" placeholder="Name (e.g., Apple Card)" required>
        <input id="debtBal" placeholder="Balance" inputmode="decimal" type="number" step="0.01" min="0" required>
        <input id="debtApr" placeholder="APR %" inputmode="decimal" type="number" step="0.01" min="0" required>
        <input id="debtMin" placeholder="Min Payment" inputmode="decimal" type="number" step="0.01" min="0" required>
        <button type="submit" class="primary">Add</button>
      </form>
      <div class="table-wrap">
        <table id="debtTable">
          <thead><tr><th>Name</th><th>Balance</th><th>APR %</th><th>Min</th><th></th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="segmented" role="radiogroup">
        <button data-seg="strat" data-val="Avalanche" type="button" class="seg active">Avalanche</button>
        <button data-seg="strat" data-val="Snowball" type="button" class="seg">Snowball</button>
      </div>
      <div class="muted" id="debtEta">—</div>
    </div>
  </section>

  <section id="spending" class="panel">
    <div class="card compact">
      <div class="card-header">
        <h2>Spending</h2>
        <div class="segmented" id="spView" role="radiogroup">
          <button class="seg active" data-mode="list" type="button">≡ List</button>
          <button class="seg" data-mode="bar" type="button">▮ Bar</button>
          <button class="seg" data-mode="pie" type="button">◔ Pie</button>
        </div>
      </div>
      <div id="spList" class="mini-table"></div>
      <svg id="spBar" class="chart" viewBox="0 0 320 160" hidden></svg>
      <svg id="spPie" class="chart" viewBox="0 0 160 160" hidden></svg>
    </div>
  </section>

  <section id="budget" class="panel">
    <div class="card compact">
      <h2>Monthly Plan</h2>
      <p class="hint">Auto plan based on your data. Envelopes & sinking funds are optional.</p>
      <div class="rowline"><span>Avg bills (last 3)</span><strong id="avgBills">$0.00</strong></div>
      <div class="rowline"><span>Suggested bills deposit</span><strong id="suggestDeposit">$0.00</strong></div>
      <div class="buttons">
        <button id="snapshotNow" type="button">Record This Month</button>
        <button id="backupBtn" type="button">Backup</button>
        <input id="restoreFile" type="file" accept="application/json">
        <button id="restoreBtn" type="button">Restore</button>
      </div>
    </div>

    <details class="card">
      <summary><strong>Envelopes & Sinking Funds (Advanced)</strong></summary>
      <div class="table-wrap">
        <table id="envTable">
          <thead><tr><th>Category</th><th>Allocation</th><th>Rollover</th><th>Sinking?</th><th>Goal</th><th></th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
      <div class="buttons">
        <button id="addEnv" type="button">Add Category</button>
        <button id="closeMonth" type="button">Close Month & Rollover</button>
      </div>
      <small class="muted" id="envInfo"></small>
    </details>
  </section>
</main>

<nav class="tabbar" aria-label="Main tabs">
  <button class="t active" type="button" data-tab="dashboard"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 10.5 12 3l9 7.5v9a1.5 1.5 0 0 1-1.5 1.5H4.5A1.5 1.5 0 0 1 3 19.5v-9Z"/><path d="M9 21v-6h6v6z"/></svg><small>Dashboard</small></button>
  <button class="t center" type="button" data-tab="calendar"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 2h2v3H7zM15 2h2v3h-2z"/><path d="M4 5h16a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2zm0 5h16v12H4z"/></svg><small>Calendar</small></button>
  <button class="t" type="button" data-tab="debts"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 5h18a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2z"/><rect x="2" y="8" width="20" height="3" fill="#fff"/></svg><small>Debts</small></button>
  <button class="t" type="button" data-tab="spending"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 21h16v2H2V3h2z"/><path d="M7 11h3v10H7zM12 6h3v15h-3zM17 14h3v7h-3z"/></svg><small>Spending</small></button>
  <button class="t" type="button" data-tab="budget"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 7a3 3 0 0 1 3-3h10a2 2 0 0 1 2 2v1h1a3 3 0 0 1 3 3v7a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V7z"/><circle cx="17" cy="12" r="1.8" fill="#fff"/></svg><small>Budget</small></button>
</nav>

<!-- Settings modal -->
<dialog id="settingsModal">
  <form method="dialog" class="settings">
    <div class="s-head">
      <div class="s-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M10.325 4.317a1.53 1.53 0 0 1 3.35 0l.149 1.19a7.97 7.97 0 0 1 1.694.702l1.064-.707a1.53 1.53 0 1 1 1.66 2.567l-.915.61c.246.53.43 1.09.547 1.67l1.101.18a1.53 1.53 0 0 1 0 3.04l-1.1.18a7.93 7.93 0 0 1-.548 1.671l.915.611a1.53 1.53 0 1 1-1.66 2.567l-1.064-.706a7.97 7.97 0 0 1-1.694.702l-.15 1.19a1.53 1.53 0 0 1-3.348 0l-.15-1.19a7.97 7.97 0 0 1-1.694-.702l-1.063.706a1.53 1.53 0 1 1-1.66-2.567l.915-.611a7.94 7.94 0 0 1-.548-1.67l-1.1-.18a1.53 1.53 0 0 1 0-3.04l1.1-.18c.117-.581.301-1.14.547-1.671l-.915-.61a1.53 1.53 0 1 1 1.66-2.567l1.063.707c.539-.28 1.107-.517 1.694-.702l.15-1.19Z"/><circle cx="12" cy="12" r="3.25"/></svg></div>
      <h3>Settings</h3>
      <button value="close" class="ghost">Done</button>
    </div>
    <div class="s-grid">
      <label> Wiggle % <input id="setWiggle" type="number" min="0" max="30" step="1"></label>
      <label> Spending % <input id="setSpend" type="number" min="0" max="30" step="1"></label>
      <label> Paydays (comma) <input id="setPaydays" placeholder="15,30"></label>
      <label> Theme
        <select id="setTheme">
          <option value="system">System</option>
          <option value="light">Light</option>
          <option value="dark">Dark</option>
        </select>
      </label>
    </div>
    <div class="muted">Changes save instantly.</div>
  </form>
</dialog>

<footer><small>Offline-capable PWA • Local-only • v1.3.4</small></footer>
<script src="app.js"></script>
</body>
</html>
